plugins {
    id 'project-conventions'
    id 'groovy' // required for Spock tests
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-webflux'

    // --- Spock + Spring Boot integration ---
    testImplementation platform('org.spockframework:spock-bom:2.4-M1-groovy-4.0')
    testImplementation 'org.spockframework:spock-core'
    testImplementation 'org.spockframework:spock-spring'

    // --- Spring Boot testing utilities ---
    testImplementation('org.springframework.boot:spring-boot-starter-test') {
        exclude group: 'org.junit.vintage'
        exclude group: 'org.junit.jupiter'
    }

    // Optional: mock libraries if needed
    testImplementation 'org.mockito:mockito-core'
    testImplementation 'org.hamcrest:hamcrest'
}

springBoot {
    mainClass = 'com.reliaquest.api.ApiApplication'
}

test {
    useJUnitPlatform() // required so Spock 2 runs properly
}
